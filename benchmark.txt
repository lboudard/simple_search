User file sample

0|605539:0.908675824224|625035:0.666019122391|147713:0.970391066344|2196:0.13182067979|350028:0.960421496403|630826:0.0781932666101|952226:0.920300844427|797523:0.178560723682|602670:0.101611523078|521114:0.335565090547|771415:0.365686343275|651362:0.218981280824|685978:0.561652031637|644834:0.147386073448|524713:0.287977585526|807205:0.0615809830574|573294:0.320732925218|579394:0.0147368398613|130830:0.0207969623477|939573:0.36118596736|913390:0.243588633161|648868:0.914227580118|232603:0.592609657988|847778:0.28667343376|431689:0.230837556109|103320:0.751145244206|405570:0.877182412564|275998:0.50026082013|581525:0.101329275527|644726:0.184242386298|973209:0.614449722038|772947:0.221597442751|710102:0.240103929726|55829:0.300200946707|870315:0.023705265121|972591:0.359540626619|351915:0.945182444578|462111:0.33472907843|974910:0.0379177669737|66673:0.864627715432|132782:0.40915474885|134754:0.88118459147|602015:0.471679673158|579597:0.839438589243|560193:0.75420141131|848183:0.547686603434|14207:0.81135776222|830405:0.541006502173|426767:0.0706733405552|294659:0.139418453843|704156:0.113035860576|960511:0.0292814277076|861227:0.406968042007|745442:0.918049770329|342585:0.55847819372|243231:0.384048591194|336537:0.505399739682|301564:0.299401338105|363821:0.62159575986|399393:0.563946876965|454809:0.467326476851|73284:0.702941951028|7364:0.128275285246|552471:0.0860058887284|149936:0.304677031615|215415:0.232895559583|642750:0.770617892478|617693:0.793717345492|923309:0.295447214529|560930:0.932910191189|973813:0.225219743057|625234:0.189945883439
1|882918:0.847893105491|463627:0.150214957762|542189:0.476764378787|697515:0.0975682218284|424149:0.482087344212|301510:0.907943644334|793199:0.580087800969|710535:0.77138508113|111086:0.62703038694|741530:0.347092792498|361251:0.416314289455|565253:0.339352063053|98971:0.0769575955601|253487:0.415223614175|380739:0.676549486101|506309:0.8099799294|880073:0.799767534529|834286:0.92050544417|3161:0.956893563741|935446:0.649979936671|919304:0.414262531629|585133:0.272618724768|712154:0.84790589169|667265:0.135339115354|11620:0.520605743252|171709:0.866929035942|249483:0.289399331341|114728:0.040342417606|35388:0.634491282178


Songs file sample
0|socket friday rescuer linens abettors|34054|Tim|786497
1|solenoid overvoltage threads classifications|366294|Spencer Joey Casey|585960
2|semiconductors davits strains|128303|Frederick Ramon Kenneth|232339
3|requirements wardroom|382318|Francesca Deja|580264
4|decisions anticipation pink qualifications|217305|Eduardo Alexandria Karla|42635
5|quartermasters|153590|Ryleigh|587570
6|medicines|228400|Tilly|212964
7|word discrepancies path basins duties|110248|Mick Josephine|660454
8|molecules public codes piston puddle|418817|Danielle Deborah Marian|306941
9|district tilling originators trick|533155|Vivian|465440


Whoosh (2.7)

First test:
- 10000 users file
- 100000 songs file

Single thread, one instance of RAM index (350 M in memory, 80M as index file)
100 queries processed within 9.83786702156 (single thread)
average query time: 0.00903088092804
max query time 0.0304529666901

lot of time taken in terms reader/caching methods...
37975    3.843    0.000    3.843    0.000 /Library/Python/2.7/sipackages/whoosh/filedb/structfile.py:367(get)
   234    0.001    0.000    3.825    0.016 /Library/Python/2.7/sipackages/whoosh/filedb/filestore.py:331(open_file)
   234    0.001    0.000    3.824    0.016 /Library/Python/2.7/sipackages/whoosh/filedb/compound.py:113(open_file)
   234    0.003    0.000    3.822    0.016 /Library/Python/2.7/sipackages/whoosh/filedb/structfile.py:363(subset)
   100    0.003    0.000    3.781    0.038 /Library/Python/2.7/sipackages/whoosh/index.py:310(searcher)
   100    0.001    0.000    3.771    0.038 /Library/Python/2.7/sipackages/whoosh/index.py:541(reader)

   100    0.001    0.000    0.803    0.008 /Library/Python/2.7/sipackages/whoosh/searching.py:733(search)


Elastic search (2.1.0)

First test:
- 10000 users file
- 100000 songs file

- 100 queries multithreaded on 10 'threads' (python multiprocesses)
nb threads: 10
nb queries_per_thread: 10
max single thread time (s):0.204299926758
max single query time (ms): 11.0
avg query time (ms): 4.24
total process time (s): 0.529282808304


